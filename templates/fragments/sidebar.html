<!-- FIXED sidebar.html - All elements with same background, no borders, with thin shadow -->
<aside id="sidebar"
    class="app-surface flex flex-col fixed h-screen top-0 left-0 w-full sm:w-80 md:w-64 max-w-full z-20 transform -translate-x-full md:translate-x-0 app-transition-slow overflow-hidden min-h-0 shadow-lg md:shadow-xl">
    <!-- Fixed header with improved mobile spacing -->
    <div class="flex-shrink-0 p-3 sm:p-4 md:p-3">
        <div class="flex items-center justify-between">
            <h3
                class="text-lg sm:text-xl md:text-lg font-semibold tracking-tight flex items-center gap-2 sm:gap-3 app-text">
                <!-- Enhanced mobile touch targets -->
                <button id="new-conversation"
                    class="app-button p-2 sm:p-3 md:p-2 rounded-full touch-manipulation shadow-depth-1 hover:shadow-depth-2 has-tooltip"
                    data-tooltip="New Chat">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" class="sm:h-6 sm:w-6 md:h-5 md:w-5"
                        viewBox="0 -960 960 960" width="20" fill="currentColor">
                        <path
                            d="M240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v240h-80v-200H520v-200H240v640h360v80H240Zm638 15L760-183v89h-80v-226h226v80h-90l118 118-56 57Zm-638-95v-640 640Z" />
                    </svg>
                </button>
                <span class="hidden sm:inline app-text">New Chat</span>
            </h3>
            <button id="sidebar-close"
                class="md:hidden app-button p-2 sm:p-3 rounded-full touch-manipulation shadow-depth-1 hover:shadow-depth-2 has-tooltip"
                data-tooltip="Close sidebar">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Main scrollable content area -->
    <div class="flex-1 flex flex-col overflow-hidden min-h-0">
        <!-- Database controls with consistent background -->
        <div class="flex-shrink-0 p-3 sm:p-4 md:p-4 space-y-3 sm:space-y-4">
            <select id="databases"
                class="app-surface w-full p-3 sm:p-4 md:p-3 text-sm sm:text-base md:text-sm font-medium tracking-wide rounded-lg touch-manipulation shadow-depth-1 app-text focus:outline-none">
                <!-- Populated by JS -->
            </select>
            <button id="connect-db"
                class="app-button w-full p-3 sm:p-4 md:p-3 text-sm sm:text-base md:text-sm font-medium tracking-wide rounded-lg touch-manipulation active:scale-95 shadow-depth-1 hover:shadow-depth-2">
                Connect
            </button>
        </div>

        <!-- Conversation history with consistent background -->
        <div class="flex-1 flex flex-col overflow-hidden p-3 sm:p-4 md:p-4 min-h-0">
            <!-- Header with same background as parent -->
            <div class="flex-shrink-0 mb-3 sm:mb-4">
                <div
                    class="app-surface flex items-center gap-2 sm:gap-3 p-3 sm:p-4 md:p-3 text-sm sm:text-base md:text-sm font-medium tracking-wide rounded-lg shadow-depth-1">
                    <svg class="h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0 app-text-secondary" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span class="app-text">Recent Chats</span>
                </div>
            </div>

            <!-- Conversation list with same background as parent -->
            <div class="flex-1 overflow-y-auto min-h-0 app-scrollbar">
                <div id="conversation-list"
                    class="app-surface space-y-2 sm:space-y-3 text-sm sm:text-base md:text-sm rounded-lg p-3 sm:p-4 md:p-3 h-full overflow-y-auto min-h-0 overflow-x-hidden app-scrollbar shadow-depth-1">
                    <!-- Populated by JS -->
                    <div id="no-conversations-message"
                        class="app-text-secondary text-center py-6 sm:py-8 text-sm sm:text-base">
                        Loading conversations...
                    </div>
                </div>
            </div>
        </div>
    </div>
</aside>